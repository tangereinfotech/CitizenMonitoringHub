{# Copyright 2011, Tangere Infotech Pvt Ltd [http://tangere.in]                 #}
{#                                                                              #}
{# Licensed under the Apache License, Version 2.0 (the "License");              #}
{# you may not use this file except in compliance with the License.             #}
{# You may obtain a copy of the License at                                      #}
{#                                                                              #}
{#       http://www.apache.org/licenses/LICENSE-2.0                             #}
{#                                                                              #}
{# Unless required by applicable law or agreed to in writing, software          #}
{# distributed under the License is distributed on an "AS IS" BASIS,            #}
{# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.     #}
{# See the License for the specific language governing permissions and          #}
{# limitations under the License.                                               #}

{% extends "signinbase.html" %}

{% block gmap_viewport_block%}
<meta name="viewport" content="initial-scale=0.1, user-scalable=no" />
{% endblock %}

{% block page_content %}
<div class="complaint-location">
  <form action="/complaint/submit/" method="post">
    {# {% csrf_token %} #}
    <div class="left-section">
      <div id="complaint-location"></div>
    </div>
    <div class="right-section">
      <fieldset>
        <legend>Location</legend>
        <select class="complaint-box" name="complaint-state" id="complaint-state">
          <option value="----">-- State --</option>
          {% for state in states %}
          <option value="{{state.code}}">{{state.name}}</option>
          {% endfor %}
        </select><br/>
        <select class="complaint-box" name="complaint-distt" id="complaint-distt">
          <option value="----">-- District --</option>
          {% for district in districts %}
          <option value="{{district.code}}">{{district.name}}</option>
          {% endfor %}
        </select><br/>
        <select class="complaint-box" name="complaint-block">
          <option value="----">-- Block --</option>
          {% for block in blocks %}
          <option value="{{block.code}}">{{block.name}}</option>
          {% endfor %}
        </select><br/>
        <select class="complaint-box" name="complaint-gp">
          <option value="----">-- Gram Panchayat --</option>
          {% for gp in gps %}
          <option value="{{gp.code}}">{{gp.name}}</option>
          {% endfor %}
        </select><br/>
        <select class="complaint-box" name="complaint-village">
          <option value="----">-- Village --</option>
          {% for village in villages %}
          <option value="{{village.code}}">{{village.name}}</option>
          {% endfor %}
        </select><br/>
      </fieldset>
      <fieldset>
        <legend>Complaint</legend>
        <label for="complaint-date" class="complaint-date">Date:</label>
        <br/>
        <input id="complaint-date" type="text" class="date-field" name="complaint-date" />
        <br/>
        <label for="complaint-department">Complaint Department:</label>
        <br/>
        <select class="complaint-box" name="complaint-department">
          <option value="----">-- Department --</option>
          {% for department in departments %}
          <option value="{{department.code}}">{{department.name}}</option>
          {% endfor %}
        </select>
        <br/>
        <select class="complaint-box" name="complaint-summary">
          <option value="----">-- Summary --</option>
          {% for summary in summarys %}
          <option value="{{summary.code}}">{{summary.name}}</option>
          {% endfor %}
        </select>
        <br/>
        <label for="complaint-description">Description:</label>
        <br/>
        <textarea name="complaint-description"
                  id="complaint-description"
                  class="complaint-description"
                  style="width:348px" rows="5"></textarea>
        <br/>
        {% for complaint_type in complaint_types %}
        <input type="checkbox" value="cbval_{{complaint_type.name}}" name="cbname_{{complaint_type.id}}_{{complaint_type.name}}"/>{{complaint_type.name}}<br/>
        {% endfor %}
      </fieldset>
    </div>
    <div style="float:left;clear:both;padding:10px 0px;width:100%">
      <fieldset>
        <legend> Complainant Details </legend>
        <label for="your-name">Name:</label>
        <input id="your-name" class="your-name" type="text" style="width:300px;" maxlength="100" />
        <label for="your-mobile" style="padding-left:40px;">Mobile Number:</label>
        <input id="your-mobile" class="your-mobile" type="text" style="width:300px;" maxlength="15" />
      </fieldset>
      <div style="text-align:center;width:100%;">
        <input type="submit" value="Submit Complaint" />
      </div>
    </div>
  </form>
</div>
<script type="text/javascript" src="/static/js/MapHandler.js"></script>
<script type="text/javascript" src="/static/js/DateTimeHandler.js"></script>
<script type="text/javascript" src="/static/js/complainthandler.js"></script>
<script type="text/javascript">
  (function($) { var field = null;})(django.jQuery);
  $ = django.jQuery;

  addEvent (window, 'load', (function () {MapHandler.init ('complaint-location')}));
  addEvent (window, 'load', (function () {DateTimeHandler.init ("date-field", "time-field")}));

  $("#complaint-state").change (populate_sub_select ("#complaint-state", "#complaint-distt", "District", "/complaint/select_region/"));

</script>
{% endblock %}
