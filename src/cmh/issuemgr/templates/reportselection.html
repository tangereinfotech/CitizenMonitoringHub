{# Copyright 2011, Tangere Infotech Pvt Ltd [http://tangere.in]                 #}
{#                                                                              #}
{# Licensed under the Apache License, Version 2.0 (the "License");              #}
{# you may not use this file except in compliance with the License.             #}
{# You may obtain a copy of the License at                                      #}
{#                                                                              #}
{#       http://www.apache.org/licenses/LICENSE-2.0                             #}
{#                                                                              #}
{# Unless required by applicable law or agreed to in writing, software          #}
{# distributed under the License is distributed on an "AS IS" BASIS,            #}
{# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.     #}
{# See the License for the specific language governing permissions and          #}
{# limitations under the License.                                               #}

{% extends "basewithmenu.html" %}
{% block page_content %}
<div style="width:100%; text-align:center;">
    <div class="report_form" align="center">
      <form action="/complaint/report/" method="post">
        {# {% csrf_token %} #}
        <fieldset  style="width:750px;">
          <legend>
            Duration
          </legend>
          {% if errorpost %}
          <table align="center">
            <tr>
              <td>
                <div class="form-field">
                  <label for="id_strtdate" class="id_strtdate">Starting Date:</label>
                  {{ errorpost.strtdate.errors }}
                </div>
                {{ errorpost.strtdate }} <br/>
              </td>
              <td></td>
              <td>
                <div class="form-field">
                  <label for="id_enddate" class="id_enddate">Ending Date:</label>
                  {{ errorpost.enddate.errors }}
                </div>
                {{ errorpost.enddate }} <br/>
              </td>
              <td>
              </td>
            </tr>
          </table>
          {% else %}
          <table align="center">
            <tr>
              <td>
                <div class="form-field">
                  <label for="id_strtdate" class="id_strtdate">Starting Date:</label>
                  {{ form.strtdate.errors }}
                </div>
                {{ form.strtdate }} <br/>
              </td>
              <td></td>
              <td>
                <div class="form-field">
                  <label for="id_enddate" class="id_enddate">Ending Date:</label>
                  {{ form.enddate.errors }}
                </div>
                {{ form.enddate }} <br/>
              </td>
              <td>
              </td>
            </tr>
          </table>
          {% endif %}

        </fieldset>
        <fieldset  style="width:750px;">
          <legend>
            Department
          </legend>
          <table style="text-align:center;">
            <tr>
              <td>
                Departments Available<br /><br/>
                {{ form.departments }}
              </td>
              <td style="text-align:center">
                <input type = "button" value="Add" id = "btnMoveRight" onclick = "fnMoveItems('id_departments','id_selecteddep')" class="btn" style="width:80px" name="hello"><br/>
                <input type = "button" value="Remove" id = "btnMoveLeft" onclick = "fnMoveItems('id_selecteddep','id_departments')" class="btn" style="width:80px">
              </td>
              <td>
                Departments Selected<br/><br/>
                {{ form.selecteddep }}
              </td>
            </tr>
          </table>
        </fieldset>
        <fieldset  style="width:750px;">
          <legend>
            Locations
          </legend>
        <table style="text-align:center;width:100%">
          <tr>
            <td style="text-align:left;width:20%">
              Select Block
            </td>
            <td style="width:100%">
              {{ form.block }}
            </td>
            <td style="text-align:center;width:10%">
              <input type="button" value="Add" onclick="appendRow('blk')" class="btn" style="width:80px">
            </td>
          </tr>
          <tr >
            <td style="text-align:left;width:20%">
              Select GramPanchayat
            </td>
            <td style="width:100%">
              {{ form.gp }}
            </td>
            <td style="text-align:center;width:10%">
              <input type="button" value="Add" onclick="appendRow('gp')" class="btn" style="width:80px">
            </td>
          </tr>
          <tr>
            <td style="text-align:left;width:20%">
              Select Village
            </td>
            <td style="width:100%">
              {{ form.village }}
            </td>
            <td style="text-align:center;width:10%">
              <input type="button" value="Add" onclick="appendRow('vill')" class="btn" style="width:80px">
            </td>
          </tr>
          <tr>
            <td style="text-align:left;width:20%">
              Selected Location Details
            </td>
            <td colspan="2" style="width:80%">
              <table class="tabularlist" id="sel_loc">
                <thead>
                  <tr>
                    <th>
                      Block
                    </th>
                    <th>
                      GramPanchayat
                    </th>
                    <th>
                      Village
                    </th>
                </tr>
                </thead>
              </table>
            </td>
          </tr>
        </table>
        </fieldset>
        <table align="center" style="text-align:center;width:830px;">
          <tr>
            <td colspan="3">
              <input type="submit" value="View Report" class="btn" />
            </td>
          </tr>
        </table>
      </form>
    </div>
</div>
<script type="text/javascript" src="/static/js/DateTimeHandler.js"></script>
<script type="text/javascript" src="/static/js/customAlert.js"></script>
<script type="text/javascript" src="/static/js/reportSelectors.js"></script>
<script type="text/javascript">
$(document).ready (function () {
    $("#id_strtdate").datepicker ({dateFormat : 'dd/mm/yy'});
    $("#id_enddate").datepicker ({dateFormat : 'dd/mm/yy'});
    $("#id_block").change(function(){
        $.getJSON ("/masters/getgpinblocks/",
                   {blockid : $(this).val ()},
                   function (data, status, jqXHR) {
                       var gp_dom_html = "<option value='0'>-------</option>"
                           var village_dom_html = "<option value='0'>-------</option>"
                               $.each (data.gps, function (index, gpdata) {
                                   gp_dom_html += "<option value='" + gpdata.id + "'>" + gpdata.name + "</option>"
                               });
                       $("#id_gp").html (gp_dom_html);
                       $("#id_village").html (village_dom_html);
                   });
    });
    $("#id_gp").change(function(){
        $.getJSON ("/masters/getvillingps/",
                   {gpid : $(this).val ()},
                   function (data, status, jqXHR) {
                       var vill_dom_html = "<option value='0'>-------</option>"
                           $.each (data.vills, function (index, villdata) {
                               vill_dom_html += "<option value='" + villdata.id + "'>" + villdata.name + "</option>"
                           });
                       $("#id_village").html (vill_dom_html);
                   });
    });
});
</script>

{% endblock %}
