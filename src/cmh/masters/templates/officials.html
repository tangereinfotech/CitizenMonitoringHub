{# Copyright 2011, Tangere Infotech Pvt Ltd [http://tangere.in]                 #}
{#                                                                              #}
{# Licensed under the Apache License, Version 2.0 (the "License");              #}
{# you may not use this file except in compliance with the License.             #}
{# You may obtain a copy of the License at                                      #}
{#                                                                              #}
{#       http://www.apache.org/licenses/LICENSE-2.0                             #}
{#                                                                              #}
{# Unless required by applicable law or agreed to in writing, software          #}
{# distributed under the License is distributed on an "AS IS" BASIS,            #}
{# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.     #}
{# See the License for the specific language governing permissions and          #}
{# limitations under the License.                                               #}

{% extends "masters.html" %}

{% block master_section %}
<div style="text-align:center;">
  <h2>List of Officials</h2>
</div>

<div class="pagination">
  <span class="step-links">
    {% if cmhusers.has_previous %}
    <a href="?page={{ cmhusers.previous_page_number }}">&lt;</a>
    {% else %}
    <span style="text-decoration: none">&lt;</span>
    {% endif %}

    <span class="current">
      <form class="inlineform" action="{{ page_url}}" method="GET">
        <input type="text"
               name="page"
               value="{{ cmhusers.number }}"
               style="width:25px; text-align:center;">
        of {{ cmhusers.paginator.num_pages }}
      </form>
    </span>
    {% if cmhusers.has_next %}
    <a href="?page={{ cmhusers.next_page_number }}">&gt;</a>
    {% else %}
    <span style="text-decoration:none">&gt;</span>
    {% endif %}
  </span>
  <a href="/masters/add_official/">Add New</a>
</div>
<table class="tabularlist">
  <tr>
    <th>Name</th>
    <th>Role</th>
    <th>Phone</th>
    <th>Department</th>
    <th>Supervisor</th>
  </tr>
  {% for cmhuser in cmhusers.object_list %}
  <tr>
    <td>{{ cmhuser.get_desc_name }}</td>
    <td>{{ cmhuser.get_role_name }}</td>
    <td>{{ cmhuser.phone_number }}</td>
    <td>
      {% for dept in cmhuser.user.official.departments.all %}
      {{ dept.value }}
      {% if forloop.last == False %}
      ,
      {% endif %}
      {% endfor %}
    </td>
    <td>
      {% if cmhuser.user.official.supervisor != None %}
      {{ cmhuser.user.official.supervisor.user.cmhuser.get_desc_name }}
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
